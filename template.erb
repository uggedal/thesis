% config[:klass].each do |klass, options|
%   if options
\documentclass[<%=options.join(',')%>]{<%=klass%>}
%   else
\documentclass{<%=klass%>}
%   end
% end

% config[:packages].each do |package|
%   package.each do |name, options|
%     if options
\usepackage[<%=options.join(',')%>]{<%=name%>}
%     else
\usepackage{<%=name%>}
%     end
%   end
% end

% if config[:title]
\title{<%=config[:title]%>}
%   if config[:sub_title]
\subtitle{<%=config[:sub_title]%>}
%   end
%   if config[:author] && config[:author][:name]
\author{%
  <%=config[:author][:name]%>
%     if config[:author][:email]
  \\
  \texttt{<%=config[:author][:email]%>}
%     end
}
%   end
%   if config[:scm]
\scm{%
%     if config[:scm][:name]
  \textbf{\Large{<%=config[:scm][:name]%> SCM statistics}} \\
%     end
%     if config[:scm][:revision]
  Revision: <%=config[:scm][:revision]%> \\
%     end
%     if config[:scm][:date]
  Date: <%=config[:scm][:date]%> \\
%     end
}
%   end
% end

% if config[:date]
\date{<%=config[:date]%>}
% end

% if config[:abstract]
\documentabstract{%
  <%=config[:abstract]%>
}
% end

% if config[:acknowledgments]
\acknowledgments{%
  <%=config[:acknowledgments]%>
}
% end

\begin{document}
  \chapterstyle{bringhurst}
  \pagestyle{bringhurst}

  \frontmatter
% if config[:title]
    \maketitle
% end
% if config[:table_of_contents]
    \cleardoublepage
    \tableofcontents
% end
% if config[:list_of_figures]
    \cleardoublepage
    \listoffigures
% end
% if config[:list_of_tables]
    \cleardoublepage
    \listoftables
% end

  \mainmatter
% config[:main_content].each do |content|
    \include{<%=content%>}
% end

% if config[:appendices] && config[:appendices].any?
    \begin{appendices}
%   config[:appendices].each do |appendix|
      \include{<%=appendix%>}
%   end
    \end{appendices}
% end

  \backmatter
% config[:bibliography].each do |file, style|
    \bibliographystyle{<%=style%>}
    \bibliography{<%=file%>}
% end
\end{document}
